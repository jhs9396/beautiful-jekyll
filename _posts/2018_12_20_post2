---
layout: post
title: rest time [quiz solution by Agensgraph]
image: /img/hello_world.jpeg
---

# 쉬어가는 시간

인터넷 서핑을 하다보면 다음과 같은 문제를 본 적이 있을 것이다.

[참조링크]: https://blog.naver.com/adol718/50144639020


내용은 대충 이렇다.
보석방에 80만원짜리 보석을 사러 온 신사가 있는데 100만원 짜리 위조수표를 사용해서 20만원을 거슬러 달라 한다.
돈이 없던 보석방 주인이 돈을 환전하기 위해 빵집 주인에게 돈을 빌리게 된다.
그런데 신사가 사용한 수표는 가짜수표였다.
이때, 보석방 주인이 손해를 본 금액은 얼마인가?

위 내용이 문제이다.
인터넷 댓글을 보다보면 
120, 160, 80, 100 등등 수많은 답이 존재했는데 이 문제를 AgensGraph를 이용하여 문제를 해결해보고자 한다.

이런 거래 자체의 흐름을 파악하기 위해선 머리로 상상하는 것이 아니라 하나씩 관계를 그려보는 것이 필요하다고 생각한다.

다음과 같이 그래프 모델링을 진행한다.
* 참고로 AgensGraph는 Vertex, Edge가 존재하는데 Vertex는 하나의 entity에 존재하는 row와 같다고 보면 된다.
(완전 같지는 않다. 이해를 돕고자 설명한 것이다.)
Edge는 이러한 Vertex들 사이의 관계를 표현할 때 사용한다. 주로 동사를 표현한다.

하여 (Vertex)-[Edge]->(Vertex) 라는 관계가 성립된다.
잘 모르겠으면 agensgraph quick guide를 참고하기 바란다.
[참조링크]: http://bitnine.net/documentations/quick-guide-1-3.html

#### 문제 상황설명
1. 신사가 보석방에게 80만원짜리 보석을 사러왔는데 수표 100만원을 지불했다.
2. 보석방 주인은 돈을 거슬러주기 위해 현금 100만원을 빵집주인에게 빌린다.
3. 돌아온 보석방 주인은 신사에게 20만원을 거슬러준다.
4. 알고보니 수표는 위조수표였고 빵집주인은 보석방 주인에게 빌린돈을 받는다.
5. 이때 보석방 주인은 손해를 얼마나 봤는가?

#### 1. 그래프 모델링에 앞서 Vertex, Edge label을 만들어야 한다.
````
위 문제에서 나타난 동사와 명사를 구분하여 label을 생성한다.
 - Vertex label 종류 : gentleman(신사), jeweler(보석방 주인), baker(빵집주인)
 - Edge label 종류 : give (주다), borrow(빌리다), repay(갚다)
````

#### 2. 이 문제를 해결하고자 그래프 데이터를 순서대로 입력한다.

